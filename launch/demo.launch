<launch>
  <arg name="use_tls" default="false" />
  <arg name="mqtt_bridge_conf" default="$(find mqtt_bridge)/config/mosquitto.conf" doc="conf file of bridge"/>

  <!-- the port of the coordination_server mqtt_bridge server -->
  <node pkg="mqtt_bridge" name="mosquitto_server" type="mosquitto_server.sh" output="screen" args="$(arg mqtt_bridge_conf)"/>

  <node name="mqtt_bridge" pkg="mqtt_bridge" type="mqtt_bridge_node.py" output="screen">
    <rosparam command="delete" param="" />
    <rosparam command="load" file="$(find mqtt_bridge)/config/demo_params.yaml" />
    <rosparam if="$(arg use_tls)" command="load" ns="mqtt" file="$(find mqtt_bridge)/config/tls_params.yaml" />
  </node>
</launch>
